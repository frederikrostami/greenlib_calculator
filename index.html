<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenLIB Black Mass Financial Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #F5F5F0;
            color: #1a202c;
            line-height: 1.6;
        }
        
        /* Top Header Bar with Logo */
        .top-header {
            background: white;
            color: #14532D;
            padding: 20px 40px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo-text {
            font-size: 28px;
            font-weight: 800;
            letter-spacing: 1px;
            color: #8BC34A;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 0.5px;
            opacity: 0.95;
        }
        
        .divider {
            width: 2px;
            height: 30px;
            background: #8BC34A;
            margin: 0 20px;
        }
        
        .container {
            max-width: 1800px;
            margin: 30px auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(20, 83, 45, 0.08);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #14532D 0%, #1e6b3d 100%);
            color: white;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(139, 195, 74, 0.15) 0%, transparent 70%);
            border-radius: 50%;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 12px;
            font-weight: 800;
            letter-spacing: -0.5px;
            position: relative;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.95;
            font-weight: 500;
            position: relative;
        }
        
        .tabs {
            display: flex;
            background: #F5F5F0;
            border-bottom: 2px solid #e5e5df;
            padding: 0 20px;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 700;
            border: none;
            background: transparent;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-size: 15px;
            letter-spacing: 0.3px;
            text-transform: uppercase;
            color: #5a5a52;
        }
        
        .tab:hover {
            background: rgba(139, 195, 74, 0.1);
            color: #14532D;
        }
        
        .tab.active {
            background: white;
            color: #14532D;
            border-bottom-color: #8BC34A;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .input-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            background: white;
            box-shadow: 0 2px 12px rgba(20, 83, 45, 0.06);
            border-radius: 12px;
            overflow: hidden;
            table-layout: fixed;
        }
        
        .input-table thead {
            background: #14532D;
            color: white;
        }
        
        .input-table th {
            padding: 16px;
            text-align: left;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .input-table tbody tr {
            border-bottom: 1px solid #F5F5F0;
            transition: background 0.2s ease;
        }
        
        .input-table tbody tr:hover {
            background: rgba(139, 195, 74, 0.05);
        }
        
        .input-table tbody tr:last-child {
            border-bottom: none;
        }
        
        .input-table td {
            padding: 14px 16px;
            font-size: 14px;
            color: #2d3748;
        }
        
        .input-table tbody td {
            vertical-align: middle;
        }
        
        .input-table td:nth-child(2),
        .input-table th:nth-child(2) {
            text-align: center !important;
            vertical-align: middle;
            width: 25%;
            padding: 14px 10px !important;
        }
        
        .input-table td:nth-child(1),
        .input-table th:nth-child(1) {
            text-align: left !important;
            vertical-align: middle;
            width: 35%;
        }
        
        .input-table td:nth-child(3),
        .input-table th:nth-child(3) {
            width: 25%;
        }
        
        .input-table td:nth-child(4),
        .input-table th:nth-child(4) {
            text-align: center !important;
            vertical-align: middle;
            width: 15%;
        }
        
        .input-table input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #d1fae5;
            background: #f0fdf4;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-align: right;
            transition: all 0.3s ease;
            color: #14532D;
        }
        
        .input-table input:focus {
            outline: none;
            border-color: #8BC34A;
            background: white;
            box-shadow: 0 0 0 4px rgba(139, 195, 74, 0.15);
            transform: scale(1.01);
        }
        
        .section-title {
            background: linear-gradient(135deg, #14532D 0%, #1e6b3d 100%);
            color: white;
            padding: 14px 24px;
            font-weight: 800;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin: 30px 0 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(20, 83, 45, 0.15);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 30px;
        }
        
        .result-card {
            background: white;
            border: 2px solid #e5e5df;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(20, 83, 45, 0.06);
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            box-shadow: 0 4px 20px rgba(20, 83, 45, 0.12);
            transform: translateY(-2px);
        }
        
        .result-card-header {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 20px;
            color: #14532D;
            padding-bottom: 12px;
            border-bottom: 3px solid #8BC34A;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-card.greenlib .result-card-header {
            color: #14532D;
        }
        
        .result-card.export .result-card-header {
            color: #5a5a52;
        }
        
        .result-table {
            width: 100%;
            font-size: 14px;
        }
        
        .result-table tr {
            border-bottom: 1px solid #F5F5F0;
        }
        
        .result-table tr:last-child {
            border-bottom: none;
        }
        
        .result-table td {
            padding: 10px 0;
        }
        
        .result-table td:last-child {
            text-align: right;
            font-weight: 700;
            color: #14532D;
        }
        
        .result-table tr:last-child td {
            padding-top: 15px;
            font-size: 16px;
        }
        
        .improvement-banner {
            background: linear-gradient(135deg, #14532D 0%, #1e6b3d 100%);
            color: white;
            padding: 32px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 20px rgba(20, 83, 45, 0.2);
        }
        .tariff-banner {
            background: #fff7ed;
            border: 2px solid #fbbf24;
            color: #78350f;
            padding: 14px 16px;
            border-radius: 10px;
            margin: 16px 0;
            font-weight: 700;
        }

        
        .improvement-banner h2 {
            font-size: 24px;
            margin-bottom: 16px;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        
        .improvement-amount {
            font-size: 48px;
            font-weight: 900;
            color: #8BC34A;
            margin: 16px 0;
            letter-spacing: -1px;
        }
        
        .improvement-details {
            font-size: 15px;
            line-height: 1.8;
            opacity: 0.95;
        }
        
        .improvement-details p {
            margin: 8px 0;
        }
        
        .esg-card {
            background: linear-gradient(135deg, #8BC34A 0%, #9ed654 100%);
            color: white;
            padding: 32px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 20px rgba(139, 195, 74, 0.25);
        }
        
        .esg-card h3 {
            font-size: 20px;
            margin-bottom: 24px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .esg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .esg-metric {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .esg-metric-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .esg-metric-value {
            font-size: 24px;
            font-weight: 800;
            margin: 8px 0;
        }
        
        .esg-metric-label {
            font-size: 12px;
            opacity: 0.95;
            line-height: 1.4;
        }
        
        .projection-card {
            background: white;
            border: 2px solid #e5e5df;
            border-radius: 12px;
            padding: 32px;
            margin: 30px 0;
            box-shadow: 0 2px 12px rgba(20, 83, 45, 0.06);
        }
        
        .projection-card h3 {
            color: #14532D;
            font-size: 20px;
            margin-bottom: 24px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .projection-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .projection-table thead {
            background: #14532D;
            color: white;
        }
        
        .projection-table th {
            padding: 14px;
            text-align: left;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }
        
        .projection-table tbody tr {
            border-bottom: 1px solid #F5F5F0;
        }
        
        .projection-table tbody tr:hover {
            background: rgba(139, 195, 74, 0.05);
        }
        
        .projection-table tbody tr:last-child {
            background: #f0fdf4;
            font-weight: 800;
            border-top: 3px solid #8BC34A;
        }
        
        .projection-table td {
            padding: 12px 14px;
            font-size: 14px;
        }
        
        .price-scenarios {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .scenario-card {
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .scenario-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 24px rgba(0,0,0,0.15);
        }
        
        .scenario-card h4 {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .scenario-card.bear {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #fbbf24;
        }
        
        .scenario-card.bear h4 {
            color: #92400e;
        }
        
        .scenario-card.base {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #60a5fa;
        }
        
        .scenario-card.base h4 {
            color: #1e40af;
        }
        
        .scenario-card.bull {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid #8BC34A;
        }
        
        .scenario-card.bull h4 {
            color: #14532D;
        }
        
        .scenario-metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            font-size: 14px;
        }
        
        .scenario-metric:last-child {
            border-bottom: none;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 2px solid rgba(0,0,0,0.2);
            font-weight: 800;
            font-size: 15px;
        }
        
        .profit-share-card {
            background: white;
            border: 2px solid #e5e5df;
            border-radius: 12px;
            padding: 32px;
            margin: 30px 0;
            box-shadow: 0 2px 12px rgba(20, 83, 45, 0.06);
        }
        
        .profit-share-card h3 {
            color: #14532D;
            font-size: 20px;
            margin-bottom: 24px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .profit-split {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .profit-split-item {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #d1fae5;
        }
        
        .profit-split-label {
            font-size: 13px;
            color: #5a5a52;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .profit-split-value {
            font-size: 28px;
            font-weight: 800;
            color: #14532D;
        }
        
        @media (max-width: 1200px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .price-scenarios {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .top-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .divider {
                display: none;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .profit-split {
                grid-template-columns: 1fr;
            }
        }
    
        .calculate-btn {
            background: linear-gradient(135deg, #8BC34A 0%, #9ed654 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 12px rgba(139, 195, 74, 0.3);
            transition: all 0.3s ease;
            margin: 30px 0;
            width: 100%;
            max-width: 400px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .calculate-btn:hover {
            background: linear-gradient(135deg, #9ed654 0%, #8BC34A 100%);
            box-shadow: 0 6px 20px rgba(139, 195, 74, 0.4);
            transform: translateY(-2px);
        }
        
        .calculate-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Top Header with Logo -->
    <div class="top-header">
        <div class="logo-container">
            <img src="data:image/png;base64,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" alt="GreenLIB" class="logo-img">
            <div class="divider"></div>
            <div class="header-title">BLACK MASS FINANCIAL CALCULATOR</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>Value Comparison Tool</h1>
            <p>Compare realization values across processing routes with real-time adjustable inputs</p>
        </div>
        
        <div class="tabs" role="tablist">
            <button class="tab active" role="tab" aria-selected="true" aria-controls="us1" id="tab-us1">US Scenario 1</button>
            <button class="tab" role="tab" aria-selected="false" aria-controls="us2" id="tab-us2">US Scenario 2</button>
            <button class="tab" role="tab" aria-selected="false" aria-controls="eu" id="tab-eu">EU Scenario</button>
        </div>
        
        <div class="content">
            <!-- US Scenario 1 -->
            <div id="us1" class="section active" role="tabpanel" aria-labelledby="tab-us1">
                <div class="section-title">METAL PRICES ($/t)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Metal</th>
                            <th style="width: 25%; text-align: center;">Benchmark</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (LME)</td>
                            <td>$15,000-20,000/t</td>
                            <td><input type="number" id="us1-ni-price" value="15000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Cobalt (MB Standard)</td>
                            <td>$40,000-50,000/t</td>
                            <td><input type="number" id="us1-co-price" value="42000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Carbonate (Technical Grade)</td>
                            <td>$6,000-10,000/t</td>
                            <td><input type="number" id="us1-li-price" value="7000" step="100"></td>
                            <td>$/t Li₂CO₃</td>
                        </tr>
                        <tr>
                            <td>Graphite (Recycled Graphite)</td>
                            <td>$1,000-2,000/t</td>
                            <td><input type="number" id="us1-graphite-price" value="1500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Fluoride (LiF)</td>
                            <td>$4,000-6,000/t</td>
                            <td><input type="number" id="us1-lif-price" value="5000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Aluminum</td>
                            <td>$2,000-3,000/t</td>
                            <td><input type="number" id="us1-al-price" value="2500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Copper</td>
                            <td>$5,000-6,000/t</td>
                            <td><input type="number" id="us1-cu-price" value="5500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">FEED COMPOSITION (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Element</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (Ni)</td>
                            <td>10-25%</td>
                            <td><input type="number" id="us1-ni-content" value="15" step="0.1" min="0" max="100"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Cobalt (Co)</td>
                            <td>5-15%</td>
                            <td><input type="number" id="us1-co-content" value="8" step="0.1" min="0" max="100"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium (Li)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="us1-li-content" value="5" step="0.1" min="0" max="100"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon (C)</td>
                            <td>30-40%</td>
                            <td><input type="number" id="us1-c-content" value="35" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine (F)</td>
                            <td>0.5-2%</td>
                            <td><input type="number" id="us1-f-content" value="1" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Aluminum (Al)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="us1-al-content" value="5" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Copper (Cu)</td>
                            <td>1-3%</td>
                            <td><input type="number" id="us1-cu-content" value="2" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">RECOVERY RATES (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Process Stream</th>
                            <th style="width: 25%; text-align: center;">Recovery Targets</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ni/Co Recovery</td>
                            <td>>99%</td>
                            <td><input type="number" id="us1-nico-recovery" value="93" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us1-li-recovery" value="90" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon Recovery</td>
                            <td>>95%</td>
                            <td><input type="number" id="us1-c-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us1-f-recovery" value="80" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Al/Cu Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us1-alcu-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">PROCESSING PARAMETERS</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GreenLIB Processing Fee</td>
                            <td>$700-1,400/t</td>
                            <td><input type="number" id="us1-processing-fee" value="1050" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Capacity Reservation Fee</td>
                            <td>$100-200/t</td>
                            <td><input type="number" id="us1-capacity-fee" value="150" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>GreenLIB all-in logistics and compliance</td>
                            <td>$140-300/t</td>
                            <td><input type="number" id="us1-greenlib-transport" value="220" step="10"></td>
                            <td>$/t</td>
                        </tr>

                        <tr>
                            <td>Export all-in logistics and compliance (CIF Asia)</td>
                            <td>$600-800/t</td>
                            <td><input type="number" id="us1-export-transport" value="700" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Export Payability (Ni/Co)</td>
                            <td>55-70%</td>
                            <td><input type="number" id="us1-export-payability" value="65" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>GreenLIB Ni/Co Payability</td>
                            <td>80-90%</td>
                            <td><input type="number" id="us1-greenlib-payability" value="85" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Annual Volume</td>
                            <td>1,000-10,000</td>
                            <td><input type="number" id="us1-volume" value="10000" step="100"></td>
                            <td>tonnes/yr</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">CUSMA / TARIFF ANALYSIS</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th style="width: 25%; text-align: center;">Options / Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>CUSMA Qualification</td>
                            <td>Qualified (0% tariff) / Not Qualified</td>
                            <td>
                                <select id="us1-cusma-qualified">
                                    <option value="true">Qualified (0% tariff)</option>
                                    <option value="false">Not Qualified</option>
                                </select>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Tariff Rate if Not Qualified</td>
                            <td>0-50%</td>
                            <td><input type="number" id="us1-tariff-rate" value="40" step="1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                                
                <button class="calculate-btn" onclick="calculateUS1()">🔬 Calculate US Scenario 1</button>
                
                <div id="us1-results"></div>
            </div>
            
            <!-- US Scenario 2 -->
            <div id="us2" class="section" role="tabpanel" aria-labelledby="tab-us2" hidden>
                <div class="section-title">METAL PRICES ($/t)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Metal</th>
                            <th style="width: 25%; text-align: center;">Benchmark</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (LME)</td>
                            <td>$15,000-20,000/t</td>
                            <td><input type="number" id="us2-ni-price" value="15000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Cobalt (MB Standard)</td>
                            <td>$40,000-50,000/t</td>
                            <td><input type="number" id="us2-co-price" value="42000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Carbonate (Technical Grade)</td>
                            <td>$6,000-10,000/t</td>
                            <td><input type="number" id="us2-li-price" value="7000" step="100"></td>
                            <td>$/t Li₂CO₃</td>
                        </tr>
                        <tr>
                            <td>Graphite (Recycled Graphite)</td>
                            <td>$1,000-2,000/t</td>
                            <td><input type="number" id="us2-graphite-price" value="1500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Fluoride (LiF)</td>
                            <td>$4,000-6,000/t</td>
                            <td><input type="number" id="us2-lif-price" value="5000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Aluminum</td>
                            <td>$2,000-3,000/t</td>
                            <td><input type="number" id="us2-al-price" value="2500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Copper</td>
                            <td>$5,000-6,000/t</td>
                            <td><input type="number" id="us2-cu-price" value="5500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">FEED COMPOSITION (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Element</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (Ni)</td>
                            <td>10-25%</td>
                            <td><input type="number" id="us2-ni-content" value="15" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Cobalt (Co)</td>
                            <td>5-15%</td>
                            <td><input type="number" id="us2-co-content" value="8" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium (Li)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="us2-li-content" value="5" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon (C)</td>
                            <td>30-40%</td>
                            <td><input type="number" id="us2-c-content" value="35" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine (F)</td>
                            <td>0.5-2%</td>
                            <td><input type="number" id="us2-f-content" value="1" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Aluminum (Al)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="us2-al-content" value="5" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Copper (Cu)</td>
                            <td>1-3%</td>
                            <td><input type="number" id="us2-cu-content" value="2" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">RECOVERY RATES (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Process Stream</th>
                            <th style="width: 25%; text-align: center;">Recovery Targets</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ni/Co Recovery</td>
                            <td>>99%</td>
                            <td><input type="number" id="us2-nico-recovery" value="93" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us2-li-recovery" value="90" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon Recovery</td>
                            <td>>95%</td>
                            <td><input type="number" id="us2-c-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us2-f-recovery" value="80" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Al/Cu Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="us2-alcu-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">PROCESSING PARAMETERS</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GreenLIB Processing Fee</td>
                            <td>$700-1,400/t</td>
                            <td><input type="number" id="us2-processing-fee" value="1050" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Capacity Reservation Fee</td>
                            <td>$100-200/t</td>
                            <td><input type="number" id="us2-capacity-fee" value="150" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>GreenLIB all-in logistics and compliance</td>
                            <td>$140-300/t</td>
                            <td><input type="number" id="us2-greenlib-transport" value="220" step="10"></td>
                            <td>$/t</td>
                        </tr>

                        <tr>
                            <td>Export all-in logistics and compliance (CIF Asia)</td>
                            <td>$600-800/t</td>
                            <td><input type="number" id="us2-export-transport" value="700" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Export Payability (Ni/Co)</td>
                            <td>55-70%</td>
                            <td><input type="number" id="us2-export-payability" value="65" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>GreenLIB Ni/Co Payability</td>
                            <td>80-90%</td>
                            <td><input type="number" id="us2-greenlib-payability" value="85" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Profit Share to Customer</td>
                            <td>50-80%</td>
                            <td><input type="number" id="us2-profit-share" value="70" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Annual Volume</td>
                            <td>1,000-10,000</td>
                            <td><input type="number" id="us2-volume" value="10000" step="100"></td>
                            <td>tonnes/yr</td>
                        </tr>
                    </tbody>
                </table>
                
                                
                <button class="calculate-btn" onclick="calculateUS2()">🔬 Calculate US Scenario 2</button>
                
                <div id="us2-results"></div>
            </div>
            
            <!-- EU Scenario -->
            <div id="eu" class="section" role="tabpanel" aria-labelledby="tab-eu" hidden>
                <div class="section-title">METAL PRICES ($/t)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Metal</th>
                            <th style="width: 25%; text-align: center;">Benchmark</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (LME)</td>
                            <td>$15,000-20,000/t</td>
                            <td><input type="number" id="eu-ni-price" value="15000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Cobalt (MB Standard)</td>
                            <td>$40,000-50,000/t</td>
                            <td><input type="number" id="eu-co-price" value="42000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Carbonate (Technical Grade)</td>
                            <td>$6,000-10,000/t</td>
                            <td><input type="number" id="eu-li-price" value="7000" step="100"></td>
                            <td>$/t Li₂CO₃</td>
                        </tr>
                        <tr>
                            <td>Graphite (Recycled Graphite)</td>
                            <td>$1,000-2,000/t</td>
                            <td><input type="number" id="eu-graphite-price" value="1500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Lithium Fluoride (LiF)</td>
                            <td>$4,000-6,000/t</td>
                            <td><input type="number" id="eu-lif-price" value="5000" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Aluminum</td>
                            <td>$2,000-3,000/t</td>
                            <td><input type="number" id="eu-al-price" value="2500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Copper</td>
                            <td>$5,000-6,000/t</td>
                            <td><input type="number" id="eu-cu-price" value="5500" step="100"></td>
                            <td>$/t</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">FEED COMPOSITION (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Element</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nickel (Ni)</td>
                            <td>10-25%</td>
                            <td><input type="number" id="eu-ni-content" value="15" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Cobalt (Co)</td>
                            <td>5-15%</td>
                            <td><input type="number" id="eu-co-content" value="8" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium (Li)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="eu-li-content" value="5" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon (C)</td>
                            <td>30-40%</td>
                            <td><input type="number" id="eu-c-content" value="35" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine (F)</td>
                            <td>0.5-2%</td>
                            <td><input type="number" id="eu-f-content" value="1" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Aluminum (Al)</td>
                            <td>3-8%</td>
                            <td><input type="number" id="eu-al-content" value="5" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Copper (Cu)</td>
                            <td>1-3%</td>
                            <td><input type="number" id="eu-cu-content" value="2" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">RECOVERY RATES (%)</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Process Stream</th>
                            <th style="width: 25%; text-align: center;">Recovery Targets</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ni/Co Recovery</td>
                            <td>>99%</td>
                            <td><input type="number" id="eu-nico-recovery" value="93" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Lithium Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="eu-li-recovery" value="90" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Carbon Recovery</td>
                            <td>>95%</td>
                            <td><input type="number" id="eu-c-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Fluorine Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="eu-f-recovery" value="80" step="0.1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Al/Cu Recovery</td>
                            <td>>90%</td>
                            <td><input type="number" id="eu-alcu-recovery" value="85" step="0.1"></td>
                            <td>%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="section-title">PROCESSING PARAMETERS</div>
                <table class="input-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th style="width: 25%; text-align: center;">Typical Range</th>
                            <th style="width: 25%;">Input Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GreenLIB Processing Fee</td>
                            <td>$700-1,400/t</td>
                            <td><input type="number" id="eu-processing-fee" value="1050" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Capacity Reservation Fee</td>
                            <td>$100-200/t</td>
                            <td><input type="number" id="eu-capacity-fee" value="150" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>GreenLIB all-in logistics and compliance</td>
                            <td>$100-200/t</td>
                            <td><input type="number" id="eu-greenlib-transport" value="150" step="10"></td>
                            <td>$/t</td>
                        </tr>

                        <tr>
                            <td>Export all-in logistics and compliance (CIF Asia)</td>
                            <td>$600-800/t</td>
                            <td><input type="number" id="eu-export-transport" value="700" step="10"></td>
                            <td>$/t</td>
                        </tr>
                        <tr>
                            <td>Export Payability (Ni/Co)</td>
                            <td>55-70%</td>
                            <td><input type="number" id="eu-export-payability" value="65" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>GreenLIB Ni/Co Payability</td>
                            <td>80-90%</td>
                            <td><input type="number" id="eu-greenlib-payability" value="85" step="1"></td>
                            <td>%</td>
                        </tr>
                        <tr>
                            <td>Annual Volume</td>
                            <td>1,000-10,000</td>
                            <td><input type="number" id="eu-volume" value="10000" step="100"></td>
                            <td>tonnes/yr</td>
                        </tr>
                    </tbody>
                </table>
                
                                
                <button class="calculate-btn" onclick="calculateEU()">🔬 Calculate EU Scenario</button>
                
                <div id="eu-results"></div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching with proper accessibility (no reliance on implicit event)
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('aria-controls');
                    
                    // Deactivate all tabs
                    document.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                        t.setAttribute('tabindex', '-1');
                    });
                    
                    // Hide all panels
                    document.querySelectorAll('.section').forEach(p => {
                        p.classList.remove('active');
                        p.setAttribute('hidden', '');
                    });
                    
                    // Activate selected tab
                    btn.classList.add('active');
                    btn.setAttribute('aria-selected', 'true');
                    btn.removeAttribute('tabindex');
                    
                    // Show selected panel
                    const panel = document.getElementById(id);
                    panel.classList.add('active');
                    panel.removeAttribute('hidden');
                });
            });
        });
        
        // Safe number parsing with bounds checking
        function num(id, { min = -Infinity, max = Infinity, fallback = 0 } = {}) {
            let v = parseFloat(document.getElementById(id).value);
            if (Number.isNaN(v) || v === null || v === undefined) v = fallback;
            return Math.min(Math.max(v, min), max);
        }
        
        // Better currency formatting
        const fmtUSD = new Intl.NumberFormat('en-US', { 
            style: 'currency', 
            currency: 'USD', 
            minimumFractionDigits: 0,
            maximumFractionDigits: 0 
        });
        
        function formatCurrency(value) {
            if (Number.isNaN(value) || !Number.isFinite(value)) return '$0';
            return fmtUSD.format(Math.round(value)).replace('$-', '-$');
        }
function calculateUS1() {
            const niPrice = parseFloat(document.getElementById('us1-ni-price').value);
            const coPrice = parseFloat(document.getElementById('us1-co-price').value);
            const liPrice = parseFloat(document.getElementById('us1-li-price').value);
            const graphitePrice = parseFloat(document.getElementById('us1-graphite-price').value);
            const lifPrice = parseFloat(document.getElementById('us1-lif-price').value);
            const alPrice = parseFloat(document.getElementById('us1-al-price').value);
            const cuPrice = parseFloat(document.getElementById('us1-cu-price').value);
            
            const niContent = parseFloat(document.getElementById('us1-ni-content').value) / 100;
            const coContent = parseFloat(document.getElementById('us1-co-content').value) / 100;
            const liContent = parseFloat(document.getElementById('us1-li-content').value) / 100;
            const cContent = parseFloat(document.getElementById('us1-c-content').value) / 100;
            const fContent = parseFloat(document.getElementById('us1-f-content').value) / 100;
            const alContent = parseFloat(document.getElementById('us1-al-content').value) / 100;
            const cuContent = parseFloat(document.getElementById('us1-cu-content').value) / 100;
            
            const nicoRecovery = parseFloat(document.getElementById('us1-nico-recovery').value) / 100;
            const liRecovery = parseFloat(document.getElementById('us1-li-recovery').value) / 100;
            const cRecovery = parseFloat(document.getElementById('us1-c-recovery').value) / 100;
            const fRecovery = parseFloat(document.getElementById('us1-f-recovery').value) / 100;
            const alcuRecovery = parseFloat(document.getElementById('us1-alcu-recovery').value) / 100;
            
            const processingFee = parseFloat(document.getElementById('us1-processing-fee').value);
            const capacityFee = parseFloat(document.getElementById('us1-capacity-fee').value);
            const greenlibTransport = parseFloat(document.getElementById('us1-greenlib-transport').value);
            const basel = 0; // Now included in all-in logistics and compliance
            const exportTransport = parseFloat(document.getElementById('us1-export-transport').value);
            const exportPayability = parseFloat(document.getElementById('us1-export-payability').value) / 100;
            const greenlibPayability = parseFloat(document.getElementById('us1-greenlib-payability').value) / 100;
            const volume = parseFloat(document.getElementById('us1-volume').value);
            
            const cusmaQualified = document.getElementById('us1-cusma-qualified').value === 'true';
            const tariffRate = parseFloat(document.getElementById('us1-tariff-rate').value) / 100;
            
            // GreenLIB Calculations
            const greenlibNiValue = niContent * nicoRecovery * greenlibPayability * niPrice;
            const greenlibCoValue = coContent * nicoRecovery * greenlibPayability * coPrice;
            const greenlibLiValue = liContent * liRecovery * 5.32 * liPrice; // 5.32 conversion factor Li to Li2CO3
            const greenlibGraphiteValue = cContent * cRecovery * graphitePrice;
            const greenlibLiFValue = fContent * fRecovery * 1.365 * lifPrice; // 1.365 conversion factor F to LiF
            const greenlibAlValue = alContent * alcuRecovery * alPrice;
            const greenlibCuValue = cuContent * alcuRecovery * cuPrice;
            
            const greenlibGrossValue = greenlibNiValue + greenlibCoValue + greenlibLiValue + greenlibGraphiteValue + greenlibLiFValue + greenlibAlValue + greenlibCuValue;
            
            // CUSMA Tariff applies when importing refined products back to US from Canada
            const tariffAmount = cusmaQualified ? 0 : (greenlibGrossValue * tariffRate);
            const greenlibNet = greenlibGrossValue - processingFee - capacityFee - greenlibTransport - basel - tariffAmount;
            
            // Export Calculations (No CUSMA tariff - going to Asia)
            const exportNiValue = niContent * exportPayability * niPrice;
            const exportCoValue = coContent * exportPayability * coPrice;
            const exportNet = exportNiValue + exportCoValue - exportTransport;
            
            // Improvement
            const improvement = greenlibNet - exportNet;
            const totalImprovement = improvement * volume;
            const improvementPct = exportNet > 0 ? (improvement / exportNet) * 100 : 0;
            
            const resultsHTML = `
                <div class="section-title">COMPARATIVE ANALYSIS</div>
                
                <div class="results-grid">
                    <div class="result-card greenlib">
                        <div class="result-card-header">🔬 GREENLIB ROUTE (CUSMA ADVANTAGE)</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value (${(liRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibLiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value (${(cRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibGraphiteValue)}/t</td>
                            </tr>
                            <tr>
                                <td>LiF + Al/Cu Value</td>
                                <td>${formatCurrency(greenlibLiFValue + greenlibAlValue + greenlibCuValue)}/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(greenlibGrossValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>-${formatCurrency(processingFee)}/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>-${formatCurrency(capacityFee)}/t</td>
                            </tr>
                            <tr>
                                <td>All-in logistics and compliance</td>
                                <td>-${formatCurrency(greenlibTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(greenlibNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="result-card export">
                        <div class="result-card-header">📦 EXPORT ROUTE (BASELINE)</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Other Metals</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(exportNiValue + exportCoValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>All-in logistics and compliance (CIF Asia)</td>
                                <td>-${formatCurrency(exportTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(exportNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                ${!cusmaQualified ? `<div class="tariff-banner">
                    <strong>⚠️ CUSMA NOT QUALIFIED - TARIFF APPLIED TO GREENLIB ROUTE</strong>
                    When importing refined products back to the US from Canada, a ${(tariffRate * 100).toFixed(0)}% tariff (${formatCurrency(tariffAmount)}/t) applies because the material does not qualify for CUSMA zero-tariff treatment. This tariff is included in the GreenLIB Net Realization above.
                </div>` : ''}
                
                <div class="improvement-banner">
                    <h2>💰 VALUE ENHANCEMENT</h2>
                    <div class="improvement-amount">${formatCurrency(improvement)} per tonne</div>
                    <div class="improvement-details">
                        <p><strong>Total Annual Benefit:</strong> ${formatCurrency(totalImprovement)} (${volume.toLocaleString("en-US", {maximumFractionDigits: 0})} tonnes)</p>
                        <p><strong>Improvement:</strong> ${improvementPct.toFixed(1)}% vs Asia Export Route</p>
                        <p><strong>Key Advantages:</strong> ${cusmaQualified ? 'CUSMA zero-tariff (no import duty from Canada) + ' : ''}Higher Ni/Co payable (${(greenlibPayability * 100).toFixed(0)}% vs ${(exportPayability * 100).toFixed(0)}%) + Full Li, Graphite, F, Al, Cu recovery${!cusmaQualified ? ' (Note: CUSMA tariff applied to GreenLIB route)' : ''}</p>
                    </div>
                </div>
                
                <div class="esg-card">
                    <h3>🌍 ESG IMPACT METRICS (LCA-VERIFIED)</h3>
                    <div class="esg-grid">
                        <div class="esg-metric">
                            <div class="esg-metric-icon">🌱</div>
                            <div class="esg-metric-value">-2,508 kg</div>
                            <div class="esg-metric-label">Net CO₂ eq per tonne (Carbon Negative!)</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">⚡</div>
                            <div class="esg-metric-value">439 kWh</div>
                            <div class="esg-metric-label">Electricity per tonne processed</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">💧</div>
                            <div class="esg-metric-value">&lt;1.0 m³</div>
                            <div class="esg-metric-label">Net water consumption (90% recycled)</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">♻️</div>
                            <div class="esg-metric-value">&lt;2%</div>
                            <div class="esg-metric-label">Hazardous waste of input</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">🏭</div>
                            <div class="esg-metric-value">${formatCurrency(volume * 2.508)} t</div>
                            <div class="esg-metric-label">Annual CO₂ Avoided (${volume.toLocaleString("en-US", {maximumFractionDigits: 0})} tonnes/yr)</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 13px; opacity: 0.9;">
                        <strong>Water Efficiency:</strong> 90% internal recycling via filtration & condensation. Net consumption &lt;1.0 m³/t vs. 5-10 m³/t for typical hydromet.<br>
                        <strong>LCA Methodology:</strong> Gate-to-gate analysis with avoided-burden allocation. Full details in Appendix I.
                    </div>
                </div>
                
                <div class="projection-card">
                    <h3>📈 5-YEAR CUMULATIVE FINANCIAL PROJECTION</h3>
                    <table class="projection-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Annual Volume (tonnes)</th>
                                <th>Improvement per Tonne</th>
                                <th>Annual Benefit</th>
                                <th>Cumulative Benefit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Year 1</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                            </tr>
                            <tr>
                                <td>Year 2</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 2)}</td>
                            </tr>
                            <tr>
                                <td>Year 3</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 3)}</td>
                            </tr>
                            <tr>
                                <td>Year 4</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 4)}</td>
                            </tr>
                            <tr>
                                <td>Year 5</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 5)}</td>
                            </tr>
                            <tr>
                                <td><strong>TOTAL 5-YEAR BENEFIT</strong></td>
                                <td colspan="3"></td>
                                <td><strong>${formatCurrency(totalImprovement * 5)}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="price-scenarios">
                    <div class="scenario-card bear">
                        <h4>🐻 BEAR CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $30,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $5,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(
                                (niContent * nicoRecovery * greenlibPayability * 12000) +
                                (coContent * nicoRecovery * greenlibPayability * 30000) +
                                (liContent * liRecovery * 5.32 * 5000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel
                            )}/t</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card base">
                        <h4>📊 BASE CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: ${formatCurrency(niPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: ${formatCurrency(coPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: ${formatCurrency(liPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(greenlibNet)}/t</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card bull">
                        <h4>🚀 BULL CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $20,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $55,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(
                                (niContent * nicoRecovery * greenlibPayability * 20000) +
                                (coContent * nicoRecovery * greenlibPayability * 55000) +
                                (liContent * liRecovery * 5.32 * 12000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel
                            )}/t</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('us1-results').innerHTML = resultsHTML;
        }
        
        // US Scenario 2 Calculation
        function calculateUS2() {
            const niPrice = parseFloat(document.getElementById('us2-ni-price').value);
            const coPrice = parseFloat(document.getElementById('us2-co-price').value);
            const liPrice = parseFloat(document.getElementById('us2-li-price').value);
            const graphitePrice = parseFloat(document.getElementById('us2-graphite-price').value);
            const lifPrice = parseFloat(document.getElementById('us2-lif-price').value);
            const alPrice = parseFloat(document.getElementById('us2-al-price').value);
            const cuPrice = parseFloat(document.getElementById('us2-cu-price').value);
            
            const niContent = parseFloat(document.getElementById('us2-ni-content').value) / 100;
            const coContent = parseFloat(document.getElementById('us2-co-content').value) / 100;
            const liContent = parseFloat(document.getElementById('us2-li-content').value) / 100;
            const cContent = parseFloat(document.getElementById('us2-c-content').value) / 100;
            const fContent = parseFloat(document.getElementById('us2-f-content').value) / 100;
            const alContent = parseFloat(document.getElementById('us2-al-content').value) / 100;
            const cuContent = parseFloat(document.getElementById('us2-cu-content').value) / 100;
            
            const nicoRecovery = parseFloat(document.getElementById('us2-nico-recovery').value) / 100;
            const liRecovery = parseFloat(document.getElementById('us2-li-recovery').value) / 100;
            const cRecovery = parseFloat(document.getElementById('us2-c-recovery').value) / 100;
            const fRecovery = parseFloat(document.getElementById('us2-f-recovery').value) / 100;
            const alcuRecovery = parseFloat(document.getElementById('us2-alcu-recovery').value) / 100;
            
            const processingFee = parseFloat(document.getElementById('us2-processing-fee').value);
            const capacityFee = parseFloat(document.getElementById('us2-capacity-fee').value);
            const greenlibTransport = parseFloat(document.getElementById('us2-greenlib-transport').value);
            const basel = 0; // Now included in all-in logistics and compliance
            const exportTransport = parseFloat(document.getElementById('us2-export-transport').value);
            const exportPayability = parseFloat(document.getElementById('us2-export-payability').value) / 100;
            const greenlibPayability = parseFloat(document.getElementById('us2-greenlib-payability').value) / 100;
            const profitSharePct = parseFloat(document.getElementById('us2-profit-share').value) / 100;
            const volume = parseFloat(document.getElementById('us2-volume').value);
            
            // GreenLIB Calculations
            const greenlibNiValue = niContent * nicoRecovery * greenlibPayability * niPrice;
            const greenlibCoValue = coContent * nicoRecovery * greenlibPayability * coPrice;
            const greenlibLiValue = liContent * liRecovery * 5.32 * liPrice;
            const greenlibGraphiteValue = cContent * cRecovery * graphitePrice;
            const greenlibLiFValue = fContent * fRecovery * 1.365 * lifPrice;
            const greenlibAlValue = alContent * alcuRecovery * alPrice;
            const greenlibCuValue = cuContent * alcuRecovery * cuPrice;
            
            const greenlibGrossValue = greenlibNiValue + greenlibCoValue + greenlibLiValue + greenlibGraphiteValue + greenlibLiFValue + greenlibAlValue + greenlibCuValue;
            const greenlibNet = greenlibGrossValue - processingFee - capacityFee - greenlibTransport - basel;
            
            // Export Calculations
            const exportNiValue = niContent * exportPayability * niPrice;
            const exportCoValue = coContent * exportPayability * coPrice;
            const exportNet = exportNiValue + exportCoValue - exportTransport;
            
            // Profit Share Calculation
            const profitPerTonne = greenlibNet - exportNet;
            const customerShare = (profitPerTonne * profitSharePct + exportNet);
            const greenlibShare = (profitPerTonne * (1 - profitSharePct));
            const totalProfitShare = customerShare * volume;
            
            const resultsHTML = `
                <div class="section-title">COMPARATIVE ANALYSIS</div>
                
                <div class="results-grid">
                    <div class="result-card greenlib">
                        <div class="result-card-header">🔬 GREENLIB ROUTE</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value (${(liRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibLiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value (${(cRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibGraphiteValue)}/t</td>
                            </tr>
                            <tr>
                                <td>LiF + Al/Cu Value</td>
                                <td>${formatCurrency(greenlibLiFValue + greenlibAlValue + greenlibCuValue)}/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(greenlibGrossValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>-${formatCurrency(processingFee)}/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>-${formatCurrency(capacityFee)}/t</td>
                            </tr>
                            <tr>
                                <td>All-in logistics and compliance</td>
                                <td>-${formatCurrency(greenlibTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(greenlibNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="result-card export">
                        <div class="result-card-header">📦 EXPORT ROUTE (BASELINE)</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Other Metals</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(exportNiValue + exportCoValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>All-in logistics and compliance (CIF Asia)</td>
                                <td>-${formatCurrency(exportTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(exportNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="profit-share-card">
                    <h3>💼 PROFIT SHARE MODEL (${(profitSharePct * 100).toFixed(0)}% Customer / ${((1-profitSharePct) * 100).toFixed(0)}% GreenLIB)</h3>
                    <div class="profit-split">
                        <div class="profit-split-item">
                            <div class="profit-split-label">Customer Gets</div>
                            <div class="profit-split-value">${formatCurrency(customerShare)}/t</div>
                            <p style="margin-top: 10px; font-size: 13px; color: #5a5a52;">Export baseline + ${(profitSharePct * 100).toFixed(0)}% of uplift</p>
                        </div>
                        <div class="profit-split-item">
                            <div class="profit-split-label">GreenLIB Gets</div>
                            <div class="profit-split-value">${formatCurrency(greenlibShare)}/t</div>
                            <p style="margin-top: 10px; font-size: 13px; color: #5a5a52;">${((1-profitSharePct) * 100).toFixed(0)}% of uplift above export baseline</p>
                        </div>
                    </div>
                    <div style="margin-top: 20px; padding: 20px; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #8BC34A;">
                        <p style="font-size: 14px; color: #14532D;"><strong>Annual Value to Customer:</strong> ${formatCurrency(totalProfitShare)} (${volume.toLocaleString("en-US", {maximumFractionDigits: 0})} tonnes/yr)</p>
                    </div>
                </div>
                
                <div class="price-scenarios">
                    <div class="scenario-card bear">
                        <h4>🐻 BEAR CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $30,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $5,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer Gets:</span>
                            <span>${formatCurrency(((
                                (niContent * nicoRecovery * greenlibPayability * 12000) +
                                (coContent * nicoRecovery * greenlibPayability * 30000) +
                                (liContent * liRecovery * 5.32 * 5000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel - exportNet
                            ) * profitSharePct + exportNet) * volume)}/yr</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card base">
                        <h4>📊 BASE CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: ${formatCurrency(niPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: ${formatCurrency(coPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: ${formatCurrency(liPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer Gets:</span>
                            <span>${formatCurrency(totalProfitShare)}/yr</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card bull">
                        <h4>🚀 BULL CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $20,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $55,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer Gets:</span>
                            <span>${formatCurrency(((
                                (niContent * nicoRecovery * greenlibPayability * 20000) +
                                (coContent * nicoRecovery * greenlibPayability * 55000) +
                                (liContent * liRecovery * 5.32 * 12000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel - exportNet
                            ) * profitSharePct + exportNet) * volume)}/yr</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('us2-results').innerHTML = resultsHTML;
        }
        
        // EU Scenario Calculation
        function calculateEU() {
            const niPrice = parseFloat(document.getElementById('eu-ni-price').value);
            const coPrice = parseFloat(document.getElementById('eu-co-price').value);
            const liPrice = parseFloat(document.getElementById('eu-li-price').value);
            const graphitePrice = parseFloat(document.getElementById('eu-graphite-price').value);
            const lifPrice = parseFloat(document.getElementById('eu-lif-price').value);
            const alPrice = parseFloat(document.getElementById('eu-al-price').value);
            const cuPrice = parseFloat(document.getElementById('eu-cu-price').value);
            
            const niContent = parseFloat(document.getElementById('eu-ni-content').value) / 100;
            const coContent = parseFloat(document.getElementById('eu-co-content').value) / 100;
            const liContent = parseFloat(document.getElementById('eu-li-content').value) / 100;
            const cContent = parseFloat(document.getElementById('eu-c-content').value) / 100;
            const fContent = parseFloat(document.getElementById('eu-f-content').value) / 100;
            const alContent = parseFloat(document.getElementById('eu-al-content').value) / 100;
            const cuContent = parseFloat(document.getElementById('eu-cu-content').value) / 100;
            
            const nicoRecovery = parseFloat(document.getElementById('eu-nico-recovery').value) / 100;
            const liRecovery = parseFloat(document.getElementById('eu-li-recovery').value) / 100;
            const cRecovery = parseFloat(document.getElementById('eu-c-recovery').value) / 100;
            const fRecovery = parseFloat(document.getElementById('eu-f-recovery').value) / 100;
            const alcuRecovery = parseFloat(document.getElementById('eu-alcu-recovery').value) / 100;
            
            const processingFee = parseFloat(document.getElementById('eu-processing-fee').value);
            const capacityFee = parseFloat(document.getElementById('eu-capacity-fee').value);
            const greenlibTransport = parseFloat(document.getElementById('eu-greenlib-transport').value);
            const basel = 0; // Now included in all-in logistics and compliance
            const exportTransport = parseFloat(document.getElementById('eu-export-transport').value);
            const exportPayability = parseFloat(document.getElementById('eu-export-payability').value) / 100;
            const greenlibPayability = parseFloat(document.getElementById('eu-greenlib-payability').value) / 100;
            const volume = parseFloat(document.getElementById('eu-volume').value);
            
            // GreenLIB Calculations
            const greenlibNiValue = niContent * nicoRecovery * greenlibPayability * niPrice;
            const greenlibCoValue = coContent * nicoRecovery * greenlibPayability * coPrice;
            const greenlibLiValue = liContent * liRecovery * 5.32 * liPrice;
            const greenlibGraphiteValue = cContent * cRecovery * graphitePrice;
            const greenlibLiFValue = fContent * fRecovery * 1.365 * lifPrice;
            const greenlibAlValue = alContent * alcuRecovery * alPrice;
            const greenlibCuValue = cuContent * alcuRecovery * cuPrice;
            
            const greenlibGrossValue = greenlibNiValue + greenlibCoValue + greenlibLiValue + greenlibGraphiteValue + greenlibLiFValue + greenlibAlValue + greenlibCuValue;
            const greenlibNet = greenlibGrossValue - processingFee - capacityFee - greenlibTransport - basel;
            
            // Export Calculations
            const exportNiValue = niContent * exportPayability * niPrice;
            const exportCoValue = coContent * exportPayability * coPrice;
            const exportNet = exportNiValue + exportCoValue - exportTransport;
            
            // Improvement
            const improvement = greenlibNet - exportNet;
            const totalImprovement = improvement * volume;
            const improvementPct = exportNet > 0 ? (improvement / exportNet) * 100 : 0;
            
            const resultsHTML = `
                <div class="section-title">COMPARATIVE ANALYSIS</div>
                
                <div class="results-grid">
                    <div class="result-card greenlib">
                        <div class="result-card-header">🔬 GREENLIB ROUTE (CETA ADVANTAGE)</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(nicoRecovery * 100).toFixed(0)}% recovery, ${(greenlibPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(greenlibCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value (${(liRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibLiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value (${(cRecovery * 100).toFixed(0)}% recovery)</td>
                                <td>${formatCurrency(greenlibGraphiteValue)}/t</td>
                            </tr>
                            <tr>
                                <td>LiF + Al/Cu Value</td>
                                <td>${formatCurrency(greenlibLiFValue + greenlibAlValue + greenlibCuValue)}/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(greenlibGrossValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>-${formatCurrency(processingFee)}/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>-${formatCurrency(capacityFee)}/t</td>
                            </tr>
                            <tr>
                                <td>All-in logistics and compliance</td>
                                <td>-${formatCurrency(greenlibTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(greenlibNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="result-card export">
                        <div class="result-card-header">📦 EXPORT ROUTE (BASELINE)</div>
                        <table class="result-table">
                            <tr>
                                <td>Ni Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportNiValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Co Value (${(exportPayability * 100).toFixed(0)}% payable)</td>
                                <td>${formatCurrency(exportCoValue)}/t</td>
                            </tr>
                            <tr>
                                <td>Li₂CO₃ Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Graphite Value</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Other Metals</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td><strong>Gross Product Value</strong></td>
                                <td><strong>${formatCurrency(exportNiValue + exportCoValue)}/t</strong></td>
                            </tr>
                            <tr>
                                <td>Processing Fee</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Capacity Reservation</td>
                                <td>$0/t</td>
                            </tr>
                            <tr>
                                <td>Ocean Freight (CIF Asia)</td>
                                <td>-${formatCurrency(exportTransport)}/t</td>
                            </tr>

                            <tr>
                                <td><strong>NET REALIZATION</strong></td>
                                <td><strong>${formatCurrency(exportNet)}/t</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="improvement-banner">
                    <h2>💰 VALUE ENHANCEMENT</h2>
                    <div class="improvement-amount">${formatCurrency(improvement)} per tonne</div>
                    <div class="improvement-details">
                        <p><strong>Total Annual Benefit:</strong> ${formatCurrency(totalImprovement)} (${volume.toLocaleString("en-US", {maximumFractionDigits: 0})} tonnes)</p>
                        <p><strong>Improvement:</strong> ${improvementPct.toFixed(1)}% vs Asia Export Route</p>
                        <p><strong>Key Advantages:</strong> CETA zero-tariff + Higher Ni/Co payable (${(greenlibPayability * 100).toFixed(0)}% vs ${(exportPayability * 100).toFixed(0)}%) + Full Li, Graphite, F, Al, Cu recovery</p>
                    </div>
                </div>
                
                <div class="esg-card">
                    <h3>🌍 ESG IMPACT METRICS (LCA-VERIFIED)</h3>
                    <div class="esg-grid">
                        <div class="esg-metric">
                            <div class="esg-metric-icon">🌱</div>
                            <div class="esg-metric-value">-2,508 kg</div>
                            <div class="esg-metric-label">Net CO₂ eq per tonne (Carbon Negative!)</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">⚡</div>
                            <div class="esg-metric-value">439 kWh</div>
                            <div class="esg-metric-label">Electricity per tonne processed</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">💧</div>
                            <div class="esg-metric-value">&lt;1.0 m³</div>
                            <div class="esg-metric-label">Net water consumption (90% recycled)</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">♻️</div>
                            <div class="esg-metric-value">&lt;2%</div>
                            <div class="esg-metric-label">Hazardous waste of input</div>
                        </div>
                        <div class="esg-metric">
                            <div class="esg-metric-icon">🏭</div>
                            <div class="esg-metric-value">${formatCurrency(volume * 2.508)} t</div>
                            <div class="esg-metric-label">Annual CO₂ Avoided (${volume.toLocaleString("en-US", {maximumFractionDigits: 0})} tonnes/yr)</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 13px; opacity: 0.9;">
                        <strong>Water Efficiency:</strong> 90% internal recycling via filtration & condensation. Net consumption &lt;1.0 m³/t vs. 5-10 m³/t for typical hydromet.<br>
                        <strong>LCA Methodology:</strong> Gate-to-gate analysis with avoided-burden allocation. Full details in Appendix I.
                    </div>
                </div>
                
                <div class="projection-card">
                    <h3>📈 5-YEAR CUMULATIVE FINANCIAL PROJECTION</h3>
                    <table class="projection-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Annual Volume (tonnes)</th>
                                <th>Improvement per Tonne</th>
                                <th>Annual Benefit</th>
                                <th>Cumulative Benefit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Year 1</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                            </tr>
                            <tr>
                                <td>Year 2</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 2)}</td>
                            </tr>
                            <tr>
                                <td>Year 3</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 3)}</td>
                            </tr>
                            <tr>
                                <td>Year 4</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 4)}</td>
                            </tr>
                            <tr>
                                <td>Year 5</td>
                                <td>${volume.toLocaleString("en-US", {maximumFractionDigits: 0})}</td>
                                <td>${formatCurrency(improvement)}</td>
                                <td>${formatCurrency(totalImprovement)}</td>
                                <td>${formatCurrency(totalImprovement * 5)}</td>
                            </tr>
                            <tr>
                                <td><strong>TOTAL 5-YEAR BENEFIT</strong></td>
                                <td colspan="3"></td>
                                <td><strong>${formatCurrency(totalImprovement * 5)}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="price-scenarios">
                    <div class="scenario-card bear">
                        <h4>🐻 BEAR CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $30,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $5,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(
                                (niContent * nicoRecovery * greenlibPayability * 12000) +
                                (coContent * nicoRecovery * greenlibPayability * 30000) +
                                (liContent * liRecovery * 5.32 * 5000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel
                            )}/t</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card base">
                        <h4>📊 BASE CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: ${formatCurrency(niPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: ${formatCurrency(coPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: ${formatCurrency(liPrice)}/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(greenlibNet)}/t</span>
                        </div>
                    </div>
                    
                    <div class="scenario-card bull">
                        <h4>🚀 BULL CASE</h4>
                        <div class="scenario-metric">
                            <span>Ni: $20,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Co: $55,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Li: $12,000/t</span>
                        </div>
                        <div class="scenario-metric">
                            <span>GreenLIB Net:</span>
                            <span>${formatCurrency(
                                (niContent * nicoRecovery * greenlibPayability * 20000) +
                                (coContent * nicoRecovery * greenlibPayability * 55000) +
                                (liContent * liRecovery * 5.32 * 12000) +
                                (cContent * cRecovery * graphitePrice) +
                                (fContent * fRecovery * 1.365 * lifPrice) +
                                (alContent * alcuRecovery * alPrice) +
                                (cuContent * alcuRecovery * cuPrice) -
                                processingFee - capacityFee - greenlibTransport - basel
                            )}/t</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('eu-results').innerHTML = resultsHTML;
        }
        
        // Auto-calculate on page load
        window.onload = function() {
            // Calculator ready - click button to calculate
        };
    </script>
</body>
</html>
